(this["webpackJsonpdatalab-drinks-frontend"]=this["webpackJsonpdatalab-drinks-frontend"]||[]).push([[0],{24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),i=a(16),r=a.n(i),l=(a(24),a(2)),d=(a(25),a(26),a(8)),o=a(3);function j(e){return fetch("http://140.114.85.21:5000/v1/orders/",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({order_by:e.name,item_id:e.id,size:e.size,sugar_id:parseInt(e.sugar),ice_id:parseInt(e.ice)})}).then((function(e){return e.ok&&alert("\u8a02\u8cfc\u6210\u529f"),e.json()}))}function b(e){return Object(c.jsx)("div",{className:"btn-group w-100",role:"group","aria-label":"Basic radio toggle button group",children:e.options.map((function(t,a){return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)("input",{type:"radio",className:"btn-check",name:"btn-radio-".concat(e.title,"-").concat(e.id),id:"btn-radio-".concat(e.title,"-").concat(e.id,"-").concat(a),autoComplete:"off",onClick:function(){e.onChange(e.values?e.values[a]:t),console.log(t)}}),Object(c.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"btn-radio-".concat(e.title,"-").concat(e.id,"-").concat(a),children:t})]},a)}))})}a(27);var m=a(17);function u(e){var t=Object(n.useState)("medium"),a=Object(l.a)(t,2),s=a[0],i=a[1],r=Object(n.useState)(""),d=Object(l.a)(r,2),o=d[0],u=d[1],h=Object(n.useState)(""),x=Object(l.a)(h,2),O=x[0],g=x[1],p=Object(n.useRef)(null),f=Object(n.useContext)(w),v=f.drinkData.sugar,N=f.drinkData.ice;e.data.cold||(N=N.filter((function(e){return 2!==e.ice_id&&3!==e.id}))),e.data.hot||(N=N.filter((function(e){return 1!==e.ice_id})));return Object(c.jsx)("div",{className:"collapse",id:e.data.item,children:Object(c.jsx)("div",{className:"order-content p-2",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"row col-lg-10",children:[Object(c.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(c.jsx)("span",{className:"",children:"\u5927\u5c0f"}),Object(c.jsx)("div",{className:"select-size ms-2 flex-grow-1",children:Object(c.jsx)(b,{id:e.data.item,title:"size",options:0===e.data.large_price?["\u4e2d"]:0===e.data.medium_price?["\u5927"]:["\u4e2d","\u5927"],values:0===e.data.large_price?["medium"]:0===e.data.medium_price?["large"]:["medium","large"],onChange:i})})]}),Object(c.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(c.jsx)("span",{children:"\u6eab\u5ea6"}),Object(c.jsx)("div",{className:"select-hot ms-2 flex-grow-1",children:Object(c.jsx)(b,{id:e.data.item,title:"ice",options:N.map((function(e){return e.ice_tag})),values:N.map((function(e){return e.ice_id})),onChange:g})})]}),Object(c.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(c.jsx)("span",{children:"\u751c\u5ea6"}),Object(c.jsx)("div",{className:"select-ice ms-2 flex-grow-1",children:Object(c.jsx)(b,{id:e.data.item,title:"sugar",options:v.map((function(e){return e.sugar_tag})),values:v.map((function(e){return e.sugar_id})),onChange:u})})]}),Object(c.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(c.jsx)("span",{children:"\u8a02\u8cfc\u4eba"}),Object(c.jsx)("div",{className:"select-name ms-2 flex-grow-1",children:Object(c.jsx)(m.Hint,{options:["\u8001\u5e2b","\u5433\u7fa9\u8def","\u5433\u5c1a\u9d3b","\u6797\u7389\u5c71","\u738b\u4ea8\u5091","\u5f90\u5049\u502b","\u8881\u5609\u5b8f","\u97d3\u5b9c\u5ead","\u5f35\u80b2\u69ae","\u738b\u5e73\u90c1","\u4f55\u661f\u7def","\u5b6b\u6d69\u502b","\u8607\u745e\u63da","\u6797\u96e8\u8431","\u7f85\u6631\u55ac","\u8a31\u5c0a\u9716","\u5f90\u90c1\u958e","\u8a79\u5176\u4f81","\u8521\u6021\u541b","\u7fa9\u8def","\u7389\u5c71","\u4ea8\u5091","\u5049\u502b","\u5609\u5b8f","\u5b9c\u5ead","\u80b2\u69ae","\u5e73\u90c1","\u661f\u7def","\u6d69\u502b","\u745e\u63da","\u96e8\u8431","\u6631\u55ac","\u5c0a\u9716","\u90c1\u958e","\u5176\u4f81","\u6021\u541b"],children:Object(c.jsx)("input",{ref:p,type:"text",className:"mt-2 form-control",placeholder:"\u4f60\u7684\u540d\u5b57","aria-label":"Username","aria-describedby":"basic-addon1"})})})]})]}),Object(c.jsx)("div",{className:"col-lg-2 px-0 py-2",children:Object(c.jsx)("button",{type:"button",className:"btn btn-outline-primary w-100 h-100",onClick:function(){var t=p.current.value;t.length<1&&alert("\u8acb\u5beb\u540d\u5b57 QWQ!"),j({name:t,id:e.data.item_id,size:s,ice:O,sugar:o}).then((function(e){console.log(e)}))},children:"\u9001\u51fa\u8a02\u55ae"})})]})})})}function h(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),s=a[0],i=a[1];return Object(c.jsxs)("li",{className:"list-group-item d-flex flex-column p-0",onClick:function(){s||i(!0)},children:[Object(c.jsx)("button",{className:"btn p-2",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e.data.item),"aria-expanded":"false","aria-controls":e.data.item,children:Object(c.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[e.data.item,Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsxs)("div",{className:"mx-1 drink-price",style:{visibility:0===e.data.medium_price?"hidden":"visible"},children:[Object(c.jsx)("span",{className:"mx-1 badge rounded-pill bg-primary",children:"M"}),Object(c.jsx)("span",{className:"mx-1",children:e.data.medium_price})]}),Object(c.jsxs)("div",{className:"mx-1 drink-price",style:{visibility:0===e.data.large_price?"hidden":"visible"},children:[Object(c.jsx)("span",{className:"mx-1 badge rounded-pill bg-primary",children:"L"}),Object(c.jsx)("span",{className:"mx-1",children:e.data.large_price})]})]})]})}),Object(c.jsx)(u,{data:e.data})]})}function x(e){return Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("ul",{className:"list-groupQQ accordion accordion-flush list-group-flush",children:e.data.map((function(e,t){return Object(c.jsx)(h,{data:e},t)}))})})}function O(e){return Object(c.jsxs)("div",{className:"my-4",children:[Object(c.jsx)("h1",{children:e.series.series}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)(x,{data:e.series.items})})]})}a(35);function g(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),s=(a[0],a[1],Object(n.useState)(0)),i=Object(l.a)(s,2),r=(i[0],i[1],Object(o.g)(),Object(o.h)());return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"container tab-content",id:"nav-tabContent",children:e.drinkData&&e.drinkData.menu&&e.drinkData.menu.map((function(e,t){return r.series==t||"all"==r.series?Object(c.jsx)("div",{className:"tab-panefadeactiveshow",id:"drink"+t,role:"tabpanel","aria-labelledby":"drink-".concat(t,"-tab"),children:Object(c.jsx)(O,{series:e})},t):Object(c.jsx)("div",{},t)}))})})}a(34);var p=a.p+"static/media/datalab-logo-white.d8636724.png",f=a.p+"static/media/datalab-bg.c70e3884.jpg";function v(e){var t=Object(o.g)().pathname.split("/");return Object(c.jsxs)("nav",{className:"navbar navbar-light navbar-expand-md p-1",id:"nav-bar",role:"tablist",children:[Object(c.jsx)("div",{id:"datalab-drink-logo-background",className:"navbar-brand py-2",style:{backgroundImage:"url(".concat(f,")")},children:Object(c.jsx)("div",{id:"datalab-drink-logo",children:Object(c.jsx)("img",{src:p,style:{height:"2.5rem"}})})}),Object(c.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{class:"navbar-toggler-icon"})}),Object(c.jsx)("div",{class:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:Object(c.jsxs)("ul",{class:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3"+("all"==t[2]?" selected":""),children:Object(c.jsx)(d.b,{className:"nav-link",to:"/drinks/all",children:"\u5168\u90e8\u98f2\u6599"})})}),e.drinkData&&e.drinkData.menu&&e.drinkData.menu.map((function(e,a){return Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3 "+(t[2]==a?" selected":""),children:Object(c.jsx)(d.b,{className:"nav-link",to:"/drinks/".concat(a),children:e.series})},a)})})),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3 "+("orders"==t[1]?" selected":""),children:Object(c.jsx)(d.b,{className:"nav-link",to:"/orders",children:"\u8a02\u8cfc\u7d00\u9304"})})})]})})]})}function N(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),s=a[0],i=a[1],r=Object(n.useContext)(w);r.drinkData.sugar,r.drinkData.ice;return Object(c.jsxs)("li",{className:"list-group-item d-flex flex-row justify-content-between",onClick:function(){s||i(!0)},children:[Object(c.jsx)("span",{children:"".concat(e.data.item,"/").concat(e.data.sugar_tag,"/").concat(e.data.ice_tag)}),Object(c.jsx)("span",{children:e.data.order_by})]})}function k(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),s=(a[0],a[1],Object(n.useContext)(w));s.drinkData.sugar,s.drinkData.ice;return Object(c.jsxs)("div",{className:"row mt-4",children:[Object(c.jsx)("h1",{children:"\u7d71\u8a08"}),e.data.map((function(e,t){return Object(c.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:Object(c.jsxs)("div",{className:"d-flex rounded border border-primary m-1 w-100 h-100",children:[Object(c.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center align-items-center p-2",children:Object(c.jsx)("span",{children:"".concat(e.item,"(").concat("large"===e.size?"\u5927":"\u4e2d",")/").concat(e.sugar_tag,"/").concat(e.ice_tag)})}),Object(c.jsx)("div",{className:"h-100 border-start border-primary p-2 d-flex justify-content-center align-items-center",children:Object(c.jsx)("span",{children:e.number})})]})},t)}))]})}function y(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),s=a[0],i=a[1],r=Object(n.useState)([]),d=Object(l.a)(r,2),o=d[0],j=d[1];return Object(n.useEffect)((function(){return fetch("http://140.114.85.21:5000/v1/orders/").then((function(e){return e.json()})).then((function(e){console.log(e),e?(j(e.payload.week_orders||[]),i(e.payload.aggregate_orders||[])):j([])})),function(){}}),[]),Object(c.jsxs)("div",{className:"container",id:"order-list",children:[Object(c.jsx)(k,{data:s}),Object(c.jsxs)("div",{className:"row mt-4",children:[Object(c.jsx)("h1",{children:"\u6e05\u55ae"}),Object(c.jsx)("ul",{className:"list-group list-group-flush",children:o.map((function(e,t){return Object(c.jsx)(N,{data:e},t)}))})]})]})}var w=s.a.createContext();var _=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],s=t[1];Object(n.useEffect)((function(){return fetch("http://140.114.85.21:5000/v1/menus/").then((function(e){return e.json()})).then((function(e){console.log(e),console.log(e.payload),s(e.payload)})),function(){}}),[]);var i={drinkData:a};return Object(c.jsxs)(w.Provider,{value:i,children:[Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(d.a,{children:[Object(c.jsx)(v,{drinkData:a}),Object(c.jsx)(n.Suspense,{fallback:Object(c.jsx)("div",{children:"Loading..."}),children:Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{exact:!0,path:"/",children:Object(c.jsx)(o.a,{to:{pathname:"/drinks/all"}})}),Object(c.jsx)(o.b,{exact:!0,path:"/drinks",children:Object(c.jsx)(o.a,{to:{pathname:"/drinks/all"}})}),Object(c.jsx)(o.b,{path:"/drinks/:series",children:Object(c.jsx)(g,{drinkData:a})}),Object(c.jsx)(o.b,{exact:!0,path:"/orders",children:Object(c.jsx)(y,{})})]})})]})}),Object(c.jsx)("footer",{className:"bd-footer p-3 mt-5 bg-light text-center text-sm-start",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("ul",{className:"bd-footer-links ps-0 mb-3",children:Object(c.jsx)("li",{className:"d-inline-block",children:Object(c.jsx)("a",{href:"https://github.com/jackraken/datalab-drinks-frontend",children:"GitHub"})})}),Object(c.jsxs)("p",{className:"mb-0",children:["Designed and built with all the love in the world by the ",Object(c.jsx)("a",{href:"http://www.cs.nthu.edu.tw/~shwu/",children:"Datalab"})," with the help of ",Object(c.jsx)("a",{href:"https://www.camacafe.com/",children:"cama coffee"}),"(03)571-1500."]})]})})]})},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(_,{})}),document.getElementById("root")),D()}},[[36,1,2]]]);
//# sourceMappingURL=main.8ad562e0.chunk.js.map