(this["webpackJsonpdatalab-drinks-frontend"]=this["webpackJsonpdatalab-drinks-frontend"]||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(17),i=a.n(s),r=(a(25),a(2)),l=(a(26),a(27),a(8)),d=a(3);function o(e){return fetch("http://shwu16.cs.nthu.edu.tw:5002/v2/orders/",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({order_by:e.name,item_id:e.id,size:e.size,sugar_id:parseInt(e.sugar),ice_id:parseInt(e.ice)})})}var j=a(0);function b(e){return Object(j.jsx)("div",{className:"btn-group w-100",role:"group","aria-label":"Basic radio toggle button group",children:e.options.map((function(t,a){return Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsx)("input",{type:"radio",className:"btn-check",name:"btn-radio-".concat(e.title,"-").concat(e.id),id:"btn-radio-".concat(e.title,"-").concat(e.id,"-").concat(a),autoComplete:"off",onClick:function(){e.onChange(e.values?e.values[a]:t),console.log(t)}}),Object(j.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"btn-radio-".concat(e.title,"-").concat(e.id,"-").concat(a),children:t})]},a)}))})}a(29);var m=a(18);function u(e){var t=Object(c.useState)("medium"),a=Object(r.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)(""),l=Object(r.a)(i,2),d=l[0],u=l[1],h=Object(c.useState)(""),x=Object(r.a)(h,2),O=x[0],g=x[1],p=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=localStorage.getItem("name")||"";e.length>1&&(p.current.value=e)}),[]);return Object(j.jsx)("div",{className:"collapse",id:e.data.item,children:Object(j.jsx)("div",{className:"order-content p-2",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"row col-lg-10",children:[Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{className:"",children:"\u5927\u5c0f"}),Object(j.jsx)("div",{className:"select-size ms-2 flex-grow-1",children:Object(j.jsx)(b,{id:e.data.item,title:"size",options:0===e.data.large_price?["\u4e2d"]:0===e.data.medium_price?["\u5927"]:["\u4e2d","\u5927"],values:0===e.data.large_price?["medium"]:0===e.data.medium_price?["large"]:["medium","large"],onChange:s})})]}),Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{children:"\u6eab\u5ea6"}),Object(j.jsx)("div",{className:"select-hot ms-2 flex-grow-1",children:Object(j.jsx)(b,{id:e.data.item,title:"ice",options:e.data.ices.reduce((function(e,t){return t.enable?e.concat([t.ice_tag]):e}),[]),values:e.data.ices.reduce((function(e,t){return t.enable?e.concat([t.ice_id]):e}),[]),onChange:g})})]}),Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{children:"\u751c\u5ea6"}),Object(j.jsx)("div",{className:"select-ice ms-2 flex-grow-1",children:Object(j.jsx)(b,{id:e.data.item,title:"sugar",options:e.data.sugars.reduce((function(e,t){return t.enable?e.concat([t.sugar_tag]):e}),[]),values:e.data.sugars.reduce((function(e,t){return t.enable?e.concat([t.sugar_id]):e}),[]),onChange:u})})]}),Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{children:"\u8a02\u8cfc\u4eba"}),Object(j.jsx)("div",{className:"select-name ms-2 flex-grow-1",children:Object(j.jsx)(m.Hint,{options:["\u8001\u5e2b","\u5433\u7fa9\u8def","\u6797\u7389\u5c71","\u738b\u4ea8\u5091","\u5f90\u5049\u502b","\u8881\u5609\u5b8f","\u97d3\u5b9c\u5ead","\u5f35\u80b2\u69ae","\u738b\u5e73\u90c1","\u4f55\u661f\u7def","\u5b6b\u6d69\u502b","\u8607\u745e\u63da","\u6797\u96e8\u8431","\u7f85\u6631\u55ac","\u8a31\u5c0a\u9716","\u5f90\u90c1\u958e","\u8a79\u5176\u4f81","\u8521\u6021\u541b","\u7fa9\u8def","\u7389\u5c71","\u4ea8\u5091","\u5049\u502b","\u5609\u5b8f","\u5b9c\u5ead","\u80b2\u69ae","\u5e73\u90c1","\u661f\u7def","\u6d69\u502b","\u745e\u63da","\u96e8\u8431","\u6631\u55ac","\u5c0a\u9716","\u90c1\u958e","\u5176\u4f81","\u6021\u541b"],children:Object(j.jsx)("input",{ref:p,type:"text",className:"mt-2 form-control",placeholder:"\u4f60\u7684\u540d\u5b57","aria-label":"Username","aria-describedby":"basic-addon1"})})})]})]}),Object(j.jsx)("div",{className:"col-lg-2 px-0 py-2",children:Object(j.jsx)("button",{type:"button",className:"btn btn-outline-primary w-100 h-100",onClick:function(){var t=p.current.value;t.length<1?alert("\u8acb\u5beb\u540d\u5b57 QWQ!"):(localStorage.setItem("name",t),o({name:t,id:e.data.item_id,size:n,ice:O,sugar:d}).then((function(e){e.ok&&alert("\u8a02\u8cfc\u6210\u529f!")})))},children:"\u9001\u51fa\u8a02\u55ae"})})]})})})}function h(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),n=a[0],s=a[1];return Object(j.jsxs)("li",{className:"list-group-item d-flex flex-column p-0",onClick:function(){n||s(!0)},children:[Object(j.jsx)("button",{className:"btn p-2",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e.data.item),"aria-expanded":"false","aria-controls":e.data.item,children:Object(j.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(j.jsx)("span",{children:e.data.item}),Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsxs)("div",{className:"mx-1 drink-price",style:{visibility:0===e.data.medium_price?"hidden":"visible"},children:[Object(j.jsx)("span",{className:"mx-1 badge rounded-pill bg-primary",children:"M"}),Object(j.jsx)("span",{className:"mx-1",children:e.data.medium_price})]}),Object(j.jsxs)("div",{className:"mx-1 drink-price",style:{visibility:0===e.data.large_price?"hidden":"visible"},children:[Object(j.jsx)("span",{className:"mx-1 badge rounded-pill bg-primary",children:"L"}),Object(j.jsx)("span",{className:"mx-1",children:e.data.large_price})]})]})]})}),Object(j.jsx)(u,{data:e.data})]})}function x(e){return Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("ul",{className:"list-groupQQ accordion accordion-flush list-group-flush",children:e.data.map((function(e,t){return e.item=e.item.replace(" ",""),Object(j.jsx)(h,{data:e},t)}))})})}function O(e){return Object(j.jsxs)("div",{className:"my-4",children:[Object(j.jsx)("h1",{children:e.series.series}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)(x,{data:e.series.items})})]})}a(37);function g(e){var t=Object(c.useState)(null),a=Object(r.a)(t,2),n=(a[0],a[1],Object(c.useState)(0)),s=Object(r.a)(n,2),i=(s[0],s[1],Object(d.g)(),Object(d.h)());return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"container tab-content",id:"nav-tabContent",children:e.drinkData&&e.drinkData.menu&&e.drinkData.menu.map((function(e,t){return i.series==t||"all"==i.series?Object(j.jsx)("div",{className:"tab-panefadeactiveshow",id:"drink"+t,role:"tabpanel","aria-labelledby":"drink-".concat(t,"-tab"),children:Object(j.jsx)(O,{series:e})},t):Object(j.jsx)("div",{},t)}))})})}a(36);var p=a.p+"static/media/datalab-logo-white.d8636724.png",f=a.p+"static/media/datalab-bg.c70e3884.jpg";function v(e){var t=Object(d.g)().pathname.split("/");return Object(j.jsxs)("nav",{className:"navbar navbar-light navbar-expand-md p-1",id:"nav-bar",role:"tablist",children:[Object(j.jsx)("div",{id:"datalab-drink-logo-background",className:"navbar-brand py-2",style:{backgroundImage:"url(".concat(f,")")},children:Object(j.jsx)("div",{id:"datalab-drink-logo",children:Object(j.jsx)("img",{src:p,style:{height:"2.5rem"}})})}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:Object(j.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3"+("all"==t[2]?" selected":""),children:Object(j.jsx)(l.b,{className:"nav-link",to:"/drinks/all",children:"\u5168\u90e8\u98f2\u6599"})})}),e.drinkData&&e.drinkData.menu&&e.drinkData.menu.map((function(e,a){return Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3 "+(t[2]==a?" selected":""),children:Object(j.jsx)(l.b,{className:"nav-link",to:"/drinks/".concat(a),children:e.series})})},a)})),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3 "+("orders"==t[1]?" selected":""),children:Object(j.jsx)(l.b,{className:"nav-link",to:"/orders",children:"\u8a02\u8cfc\u7d00\u9304"})})})]})})]})}function N(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),n=a[0],s=a[1],i=Object(c.useContext)(y);i.drinkData.sugar,i.drinkData.ice;return Object(j.jsxs)("li",{className:"list-group-item d-flex flex-row justify-content-between",onClick:function(){n||s(!0)},children:[Object(j.jsx)("span",{children:"".concat(e.data.item)}),Object(j.jsx)("span",{children:e.data.order_by})]})}function k(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),n=(a[0],a[1],Object(c.useContext)(y));n.drinkData.sugar,n.drinkData.ice;return Object(j.jsxs)("div",{className:"row mt-4",children:[Object(j.jsx)("h1",{children:"\u7d71\u8a08"}),e.data.map((function(e,t){return Object(j.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:Object(j.jsxs)("div",{className:"d-flex rounded border border-primary m-1 w-100 h-100",children:[Object(j.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center align-items-center p-2",children:Object(j.jsx)("span",{children:"".concat(e.item,"(").concat("large"===e.size?"\u5927":"\u4e2d",")/").concat(e.sugar_tag,"/").concat(e.ice_tag)})}),Object(j.jsx)("div",{className:"h-100 border-start border-primary p-2 d-flex justify-content-center align-items-center",children:Object(j.jsx)("span",{children:e.number})})]})},t)}))]})}function w(e){var t=Object(c.useState)([]),a=Object(r.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)([]),l=Object(r.a)(i,2),d=l[0],o=l[1];return Object(c.useEffect)((function(){return fetch("http://shwu16.cs.nthu.edu.tw:5002/v2/orders/").then((function(e){return e.json()})).then((function(e){console.log(e),e?(o(e.payload.week_orders||[]),s(e.payload.aggregate_orders||[])):o([])})),function(){}}),[]),Object(j.jsxs)("div",{className:"container",id:"order-list",children:[Object(j.jsx)(k,{data:n}),Object(j.jsxs)("div",{className:"row mt-4",children:[Object(j.jsx)("h1",{children:"\u6e05\u55ae"}),Object(j.jsx)("ul",{className:"list-group list-group-flush",children:d.map((function(e,t){return Object(j.jsx)(N,{data:e},t)}))})]})]})}var y=n.a.createContext();var _=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),a=t[0],n=t[1];Object(c.useEffect)((function(){return fetch("http://shwu16.cs.nthu.edu.tw:5002/v2/menus/").then((function(e){return e.json()})).then((function(e){console.log(e),console.log(e.payload),n(e.payload)})),function(){}}),[]);var s={drinkData:a};return Object(j.jsxs)(y.Provider,{value:s,children:[Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(l.a,{children:[Object(j.jsx)(v,{drinkData:a}),Object(j.jsx)(c.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading..."}),children:Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{exact:!0,path:"/",children:Object(j.jsx)(d.a,{to:{pathname:"/drinks/all"}})}),Object(j.jsx)(d.b,{exact:!0,path:"/drinks",children:Object(j.jsx)(d.a,{to:{pathname:"/drinks/all"}})}),Object(j.jsx)(d.b,{path:"/drinks/:series",children:Object(j.jsx)(g,{drinkData:a})}),Object(j.jsx)(d.b,{exact:!0,path:"/orders",children:Object(j.jsx)(w,{})})]})})]})}),Object(j.jsx)("footer",{className:"bd-footer p-3 mt-5 bg-light text-center text-sm-start",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("ul",{className:"bd-footer-links ps-0 mb-3",children:Object(j.jsx)("li",{className:"d-inline-block",children:Object(j.jsx)("a",{href:"https://github.com/jackraken/datalab-drinks-frontend",children:"GitHub"})})}),Object(j.jsxs)("p",{className:"mb-0",children:["Designed and built with all the love in the world by the ",Object(j.jsx)("a",{href:"http://www.cs.nthu.edu.tw/~shwu/",children:"Datalab"})," with the help of ",Object(j.jsx)("a",{href:"https://www.camacafe.com/",children:"cama coffee"}),"(03)571-1500."]})]})})]})},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};i.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(_,{})}),document.getElementById("root")),D()}},[[38,1,2]]]);
//# sourceMappingURL=main.7b591872.chunk.js.map