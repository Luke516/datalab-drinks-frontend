(this["webpackJsonpdatalab-drinks-frontend"]=this["webpackJsonpdatalab-drinks-frontend"]||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},41:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),n=a(11),i=a.n(n),r=(a(35),a(4)),l=(a(36),a(37),a(12)),d=a(3),o=(a(38),a(23));var j=a(1);function b(e){return Object(j.jsx)("div",{className:"btn-group w-100",role:"group","aria-label":"Basic radio toggle button group",children:e.options.map((function(t,a){return Object(j.jsxs)(s.a.Fragment,{children:[Object(j.jsx)("input",{type:"radio",className:"btn-check",name:"btn-radio-".concat(e.title,"-").concat(e.id),id:"btn-radio-".concat(e.title,"-").concat(e.id,"-").concat(a),autoComplete:"off",onClick:function(){e.onChange(e.values?e.values[a]:t),console.log(t)}}),Object(j.jsx)("label",{className:"btn btn-outline-primary",htmlFor:"btn-radio-".concat(e.title,"-").concat(e.id,"-").concat(a),children:t})]},a)}))})}function u(e){var t=Object(c.useState)("medium"),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)(""),l=Object(r.a)(i,2),d=l[0],u=l[1],m=Object(c.useState)(""),h=Object(r.a)(m,2),x=h[0],O=h[1],f=Object(c.useRef)(null),g=Object(c.useContext)(C),p=(g.showSuccessModal,g.setShowSuccessModal);Object(c.useEffect)((function(){var e=localStorage.getItem("name")||"";e.length>1&&(f.current.value=e)}),[]);return Object(j.jsx)("div",{className:"collapse",id:e.data.item,children:Object(j.jsx)("div",{className:"order-content p-2",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"row col-lg-10",children:[Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{className:"",children:"\u5927\u5c0f"}),Object(j.jsx)("div",{className:"select-size ms-2 flex-grow-1",children:Object(j.jsx)(b,{id:e.data.item,title:"size",options:0===e.data.large_price?["\u4e2d"]:0===e.data.medium_price?["\u5927"]:["\u4e2d","\u5927"],values:0===e.data.large_price?["medium"]:0===e.data.medium_price?["large"]:["medium","large"],onChange:n})})]}),Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{children:"\u6eab\u5ea6"}),Object(j.jsx)("div",{className:"select-hot ms-2 flex-grow-1",children:Object(j.jsx)(b,{id:e.data.item,title:"ice",options:e.data.ices.reduce((function(e,t){return t.enable?e.concat([t.ice_tag]):e}),[]),values:e.data.ices.reduce((function(e,t){return t.enable?e.concat([t.ice_id]):e}),[]),onChange:O})})]}),Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{children:"\u751c\u5ea6"}),Object(j.jsx)("div",{className:"select-ice ms-2 flex-grow-1",children:Object(j.jsx)(b,{id:e.data.item,title:"sugar",options:e.data.sugars.reduce((function(e,t){return t.enable?e.concat([t.sugar_tag]):e}),[]),values:e.data.sugars.reduce((function(e,t){return t.enable?e.concat([t.sugar_id]):e}),[]),onChange:u})})]}),Object(j.jsxs)("div",{className:"my-2 col-lg-6 d-flex flex-row align-items-center",children:[Object(j.jsx)("span",{children:"\u8a02\u8cfc\u4eba"}),Object(j.jsx)("div",{className:"select-name ms-2 flex-grow-1",children:Object(j.jsx)(o.Hint,{options:["\u8001\u5e2b","\u5433\u7fa9\u8def","\u6797\u7389\u5c71","\u738b\u4ea8\u5091","\u5f90\u5049\u502b","\u8881\u5609\u5b8f","\u97d3\u5b9c\u5ead","\u5f35\u80b2\u69ae","\u738b\u5e73\u90c1","\u4f55\u661f\u7def","\u5b6b\u6d69\u502b","\u8607\u745e\u63da","\u6797\u96e8\u8431","\u7f85\u6631\u55ac","\u8a31\u5c0a\u9716","\u5f90\u90c1\u958e","\u8a79\u5176\u4f81","\u8521\u6021\u541b","\u7fa9\u8def","\u7389\u5c71","\u4ea8\u5091","\u5049\u502b","\u5609\u5b8f","\u5b9c\u5ead","\u80b2\u69ae","\u5e73\u90c1","\u661f\u7def","\u6d69\u502b","\u745e\u63da","\u96e8\u8431","\u6631\u55ac","\u5c0a\u9716","\u90c1\u958e","\u5176\u4f81","\u6021\u541b"],children:Object(j.jsx)("input",{ref:f,type:"text",className:"mt-2 form-control",placeholder:"\u4f60\u7684\u540d\u5b57","aria-label":"Username","aria-describedby":"basic-addon1"})})})]})]}),Object(j.jsx)("div",{className:"col-lg-2 px-0 py-2",children:Object(j.jsx)("button",{type:"button",className:"btn btn-outline-primary w-100 h-100",onClick:function(){var t,a=f.current.value;a.length<1?alert("\u8acb\u5beb\u540d\u5b57 QWQ!"):(localStorage.setItem("name",a),(t={name:a,id:e.data.item_id,size:s,ice:x,sugar:d},fetch("http://shwu16.cs.nthu.edu.tw:5002/v2/orders/",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({order_by:t.name,item_id:t.id,size:t.size,sugar_id:parseInt(t.sugar),ice_id:parseInt(t.ice)})})).then((function(e){e.ok&&(console.log("\u8a02\u8cfc\u6210\u529f!"),p(!0))})))},children:"\u9001\u51fa\u8a02\u55ae"})})]})})})}function m(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),s=a[0],n=a[1];return Object(j.jsxs)("li",{className:"list-group-item d-flex flex-column p-0",onClick:function(){s||n(!0)},children:[Object(j.jsx)("div",{className:"btn p-2 jf-jinxuanlatte-medium",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e.data.item),"aria-expanded":"false","aria-controls":e.data.item,children:Object(j.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(j.jsx)("span",{children:e.data.item}),Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsxs)("div",{className:"mx-1 drink-price",style:{visibility:0===e.data.medium_price?"hidden":"visible"},children:[Object(j.jsx)("span",{className:"mx-1 badge rounded-pill bg-primary",children:"M"}),Object(j.jsx)("span",{className:"mx-1",children:e.data.medium_price})]}),Object(j.jsxs)("div",{className:"mx-1 drink-price",style:{visibility:0===e.data.large_price?"hidden":"visible"},children:[Object(j.jsx)("span",{className:"mx-1 badge rounded-pill bg-primary",children:"L"}),Object(j.jsx)("span",{className:"mx-1",children:e.data.large_price})]})]})]})}),Object(j.jsx)(u,{data:e.data})]})}function h(e){return Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("ul",{className:"accordion accordion-flush list-group-flush",children:e.data.map((function(e,t){return e.item=e.item.replace(" ",""),Object(j.jsx)(m,{data:e},t)}))})})}function x(e){return Object(j.jsxs)("div",{className:"my-4",children:[Object(j.jsx)("h1",{children:e.series.series}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)(h,{data:e.series.items})})]})}var O=a(52),f=a(53);a(41);function g(e){var t=Object(c.useContext)(C),a=t.drinkData,n=t.showSuccessModal,i=t.setShowSuccessModal,r=(Object(d.g)(),Object(d.h)()),l=s.a.useRef(null);return Object(c.useEffect)((function(){setTimeout((function(){window._jf.flush()}),500)}),[]),Object(j.jsxs)(s.a.Fragment,{children:[Object(j.jsx)("div",{className:"container tab-content","data-aos":"fade-in","data-aos-duration":"300",id:"nav-tabContent",children:a&&a.menu&&a.menu.map((function(e,t){return r.series==t||"all"==r.series?Object(j.jsx)("div",{className:"tab-panefadeactiveshow",id:"drink"+t,role:"tabpanel","aria-labelledby":"drink-".concat(t,"-tab"),children:Object(j.jsx)(x,{series:e})},t):Object(j.jsx)("div",{},t)}))}),Object(j.jsx)(f.a,{nodeRef:l,in:n,timeout:2e3,classNames:"success-modal",children:Object(j.jsx)("div",{className:"w-100 justify-content-center success-modal",ref:l,children:Object(j.jsxs)(O.a,{className:"m-0 px-4 text-center",children:[Object(j.jsx)("span",{children:"\u8a02\u8cfc\u6210\u529f \u1d54\u1d25\u1d54"}),Object(j.jsx)("span",{className:"mx-3"}),Object(j.jsx)("div",{className:"btn btn-primary",onClick:function(){i(!1)},children:"OK"})]})})})]})}a(46);var p=a.p+"static/media/datalab-logo-white.d8636724.png",v=a.p+"static/media/datalab-bg.c70e3884.jpg";function N(e){var t=Object(d.g)().pathname.split("/");return Object(j.jsxs)("nav",{className:"navbar navbar-light navbar-expand-md p-1",id:"nav-bar",role:"tablist",children:[Object(j.jsx)("div",{id:"datalab-drink-logo-background",className:"navbar-brand py-2",style:{backgroundImage:"url(".concat(v,")")},children:Object(j.jsx)("div",{id:"datalab-drink-logo",children:Object(j.jsx)("img",{src:p,style:{height:"2.5rem"}})})}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03",children:Object(j.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3"+("all"==t[2]?" selected":""),children:Object(j.jsx)(l.b,{className:"nav-link",to:"/drinks/all",children:"\u5168\u90e8\u98f2\u6599"})})}),e.drinkData&&e.drinkData.menu&&e.drinkData.menu.map((function(e,a){return Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3 "+(t[2]==a?" selected":""),children:Object(j.jsx)(l.b,{className:"nav-link",to:"/drinks/".concat(a),children:e.series})})},a)})),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)("div",{className:"nav-link-background mx-lg-0 mx-sm-3 "+("orders"==t[1]?" selected":""),children:Object(j.jsx)(l.b,{className:"nav-link",to:"/orders",children:"\u8a02\u8cfc\u7d00\u9304"})})})]})})]})}function w(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(c.useContext)(C);i.drinkData.sugar,i.drinkData.ice;return Object(j.jsxs)("li",{className:"list-group-item d-flex flex-row justify-content-between",onClick:function(){s||n(!0)},children:[Object(j.jsx)("span",{children:"".concat(e.data.item)}),Object(j.jsx)("span",{children:e.data.order_by})]})}function k(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),s=(a[0],a[1],Object(c.useContext)(C));s.drinkData.sugar,s.drinkData.ice;return Object(j.jsxs)("div",{className:"row mt-4",children:[Object(j.jsx)("h1",{children:"\u7d71\u8a08"}),e.data.map((function(e,t){return Object(j.jsx)("div",{className:"col-lg-4 col-md-6 p-2",children:Object(j.jsxs)("div",{className:"d-flex rounded border border-primary m-1 w-100 h-100",children:[Object(j.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center align-items-center p-2",children:Object(j.jsx)("span",{children:"".concat(e.item,"(").concat("large"===e.size?"\u5927":"\u4e2d",")/").concat(e.sugar_tag,"/").concat(e.ice_tag)})}),Object(j.jsx)("div",{className:"h-100 border-start border-primary p-2 d-flex justify-content-center align-items-center",children:Object(j.jsx)("span",{children:e.number})})]})},t)}))]})}function y(e){var t=Object(c.useState)([]),a=Object(r.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)([]),l=Object(r.a)(i,2),d=l[0],o=l[1];return Object(c.useEffect)((function(){return fetch("http://shwu16.cs.nthu.edu.tw:5002/v2/orders/").then((function(e){return e.json()})).then((function(e){console.log(e),e?(o(e.payload.week_orders||[]),n(e.payload.aggregate_orders||[])):o([])})),function(){}}),[]),Object(c.useEffect)((function(){setTimeout((function(){window._jf.flush()}),500)}),[]),Object(j.jsxs)("div",{className:"container",id:"order-list","data-aos":"fade-in","data-aos-duration":"300",children:[Object(j.jsx)(k,{data:s}),Object(j.jsxs)("div",{className:"row mt-4",children:[Object(j.jsx)("h1",{children:"\u6e05\u55ae"}),Object(j.jsx)("ul",{className:"list-group list-group-flush",children:d.map((function(e,t){return Object(j.jsx)(w,{data:e},t)}))})]})]})}var S=a(29),_=a.n(S),C=(a(47),s.a.createContext());var D=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!1),i=Object(r.a)(n,2),o=i[0],b=i[1],u=Object(c.useState)(""),m=Object(r.a)(u,2),h=m[0],x=m[1];Object(c.useEffect)((function(){return _.a.init({duration:2e3}),fetch("http://shwu16.cs.nthu.edu.tw:5002/v2/menus/").then((function(e){return e.json()})).then((function(e){console.log(e),console.log(e.payload),s(e.payload)})),function(){}}),[]);var O={drinkData:a,showSuccessModal:o,setShowSuccessModal:b,focusDrinkId:h,setFocusDrinkId:x};return Object(j.jsxs)(C.Provider,{value:O,children:[Object(j.jsx)("div",{className:"App","data-aos":"fade-in","data-aos-delay":"700",children:Object(j.jsxs)(l.a,{children:[Object(j.jsx)(N,{drinkData:a}),Object(j.jsx)(c.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading..."}),children:Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{exact:!0,path:"/",children:Object(j.jsx)(d.a,{to:{pathname:"/drinks/all"}})}),Object(j.jsx)(d.b,{exact:!0,path:"/drinks",children:Object(j.jsx)(d.a,{to:{pathname:"/drinks/all"}})}),Object(j.jsx)(d.b,{path:"/drinks/:series",children:Object(j.jsx)(g,{})}),Object(j.jsx)(d.b,{exact:!0,path:"/orders",children:Object(j.jsx)(y,{})})]})})]})}),Object(j.jsx)("footer",{className:"bd-footer p-3 mt-5 bg-light text-center text-sm-start",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("ul",{className:"bd-footer-links ps-0 mb-3",children:Object(j.jsx)("li",{className:"d-inline-block",children:Object(j.jsx)("a",{href:"https://github.com/jackraken/datalab-drinks-frontend",children:"GitHub"})})}),Object(j.jsxs)("p",{className:"mb-0",children:["Designed and built with all the love in the world by the ",Object(j.jsx)("a",{href:"http://www.cs.nthu.edu.tw/~shwu/",children:"Datalab"})," with the help of ",Object(j.jsx)("a",{href:"https://www.camacafe.com/",children:"cama coffee"}),"(03)571-1500."]})]})})]})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))};i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(D,{})}),document.getElementById("root")),T()}},[[48,1,2]]]);
//# sourceMappingURL=main.1de52b08.chunk.js.map